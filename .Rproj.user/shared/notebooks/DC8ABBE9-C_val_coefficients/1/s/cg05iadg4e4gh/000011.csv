"0","# now compute all the validity coeffs"
"0","method_names = c(""Thurstone"",""Bartlett"",""tenBerge"",""Harman"")"
"0","q_name = c(""PF16"",""BIG5"",""SD3"",""MPQ"",""PID5"")"
"0","nfactors = c(16,5,3,11,25)"
"0","for (j in seq(1,5)) {"
"0","big_gutt_vals = NULL"
"0","big_vals = NULL"
"0","name = paste0(q_name[j],'_comp_qs_rev')"
"0","res<-faMain(X = get(name), numFactors = nfactors[j], facMethod = 'fapa',rotate = 'promaxQ')"
"0","load(file = paste0(q_name[j],""_weights.RData""))"
"0","FSCoef = as.matrix(get(paste0(q_name[j],""_weights"")))"
"0","# just reordering to the factors"
"0","align_res = faAlign(FSCoef,res$loadings, Phi2 =res$Phi )"
"0","res$loadings = align_res$F2 "
"0","res$Phi = align_res$Phi2"
"0"," for (jj in method_names){"
"0","scores<-faScores(X = get(name), Loadings = res$loadings, Phi = res$Phi, Method = jj)"
"0","L <- diag(apply(scores$fscores,2,sd))"
"0","val_coeffs<- diag(t(res$loadings %*% res$Phi) %*% scores$W %*% solve(L))"
"0","score_names = rep(jj,length(val_coeffs))"
"0","big_vals = rbind(big_vals,cbind(score_names,val_coeffs))"
"0","}"
"0","#add in sum scores"
"0","Struct  = res$loadings %*% res$Phi"
"0","ItemCor = cor(get(name))"
"0","C = sqrt(diag(diag(t(FSCoef) %*% ItemCor %*% FSCoef)))"
"0","val_coeffs<-abs(diag(t(Struct) %*% FSCoef %*% solve(C)))"
"0","score_names = rep(""Sum"",length(val_coeffs))"
"0","big_vals = rbind(big_vals,cbind(score_names,val_coeffs))"
"0","save(big_vals, file = paste0(q_name[j], ""_vals.RData""))"
"0","}"
